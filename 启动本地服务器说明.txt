小说智阅坊 - 通用本地服务器启动说明
==========================================

项目简介
--------
小说智阅坊是一个小说阅读与智能分析平台，集成了AI助读和读者参与式阅读功能。

📋 系统要求
--------
- 操作系统：Windows 10/11, macOS, Linux
- Node.js版本：>= 14.0.0（推荐使用Node.js 16.x或18.x）
- 内存：至少2GB可用内存
- 磁盘空间：至少100MB可用空间

🚀 快速启动指南（适用于任何电脑）
--------------------------------

第一步：安装Node.js
------------------
1. 访问 https://nodejs.org/ 下载并安装Node.js
2. 推荐安装LTS（长期支持）版本
3. 安装完成后验证安装：
   ```bash
   node --version
   npm --version
   ```

第二步：准备项目文件
------------------
1. 将整个项目文件夹复制到目标电脑
2. 确保文件夹包含以下关键文件：
   - final_volcano_server.js
   - package.json
   - P-HOME.html
   - P-READER.html
   - 其他HTML页面文件

第三步：安装项目依赖
------------------
1. 打开命令行/终端
2. 切换到项目文件夹：
   ```bash
   # Windows - 方法1：资源管理器
   # 在项目文件夹空白处按住Shift+右键，选择"在此处打开PowerShell窗口"
   
   # Windows - 方法2：命令行
   cd 项目文件夹路径
   
   # macOS/Linux
   cd /项目文件夹路径
   ```
3. 安装依赖包：
   ```bash
   npm install
   ```
4. 如果网络连接有问题，使用国内镜像：
   ```bash
   npm install --registry=https://registry.npmmirror.com
   ```

第四步：启动服务器
------------------
选择以下任一方法启动：

方法:

直接运行Node.js文件
```bash
node final_volcano_server.js
```


✅ 成功启动标志
--------------
服务器启动成功后，命令行将显示：
```
小说智阅坊服务器已启动
服务器运行在：http://localhost:8888
火山方舟API已配置就绪
```

🌐 访问网站
----------
在浏览器中打开：
```
http://localhost:8888
```
或直接访问首页：
```
http://localhost:8888/P-HOME.html
```

🔧 多平台兼容性说明
------------------

Windows系统特殊说明
-------------------
1. 权限问题：如果遇到权限错误，以管理员身份运行命令行
2. 防火墙：首次运行时允许Node.js通过防火墙
3. 路径分隔符：使用反斜杠 \\ 或正斜杠 /

macOS/Linux系统说明
------------------
1. 权限：可能需要使用sudo安装全局包
2. 端口：确保8888端口未被占用
3. 路径：使用正斜杠 / 作为路径分隔符

📱 功能特性
----------

1. 基础阅读功能
   - 小说书架管理
   - 章节阅读
   - 阅读进度保存

2. AI助读功能
   - 右下角红色AI按钮
   - 点击与"小樟同学"AI助手对话
   - 基于当前阅读内容回答问题

3. 读者参与式阅读
   - 在故事关键节点提供选择
   - 两个预设选项 + 一个自定义选项
   - AI生成后续简短剧情

🚨 故障排除大全
--------------

问题1：端口被占用
症状：Error: listen EADDRINUSE: address already in use
解决：
- 方法A：自动选择可用端口（推荐）
  ```bash
  # 修改final_volcano_server.js中的PORT为0，系统会自动分配
  const PORT = 0;
  ```
- 方法B：手动指定其他端口
  ```bash
  # 修改为3001, 8080, 8889等
  const PORT = 3001;
  ```
- 方法C：终止占用进程
  ```bash
  # Windows
  netstat -ano | findstr :8888
  taskkill /PID <进程ID> /F
  
  # macOS/Linux
  lsof -i :8888
  kill -9 <进程ID>
  ```

问题2：Node.js版本不兼容
症状：SyntaxError: Unexpected token 'const'
解决：
1. 检查当前版本：`node --version`
2. 如果版本过高（>18.x），建议降级：
   - 使用nvm（Node版本管理器）
   - 或安装兼容版本（14.x-18.x）
3. 清理并重新安装依赖：
   ```bash
   rm -rf node_modules  # macOS/Linux
   rmdir /s /q node_modules  # Windows
   npm install
   ```

问题3：依赖安装失败
解决：
1. 检查网络连接
2. 清理npm缓存：`npm cache clean --force`
3. 使用国内镜像：
   ```bash
   npm install --registry=https://registry.npmmirror.com
   ```
4. 删除package-lock.json后重试

问题4：找不到命令或文件
解决：
1. 确认在正确的项目目录
2. 检查文件路径是否正确
3. Windows用户确保使用正确的命令行工具

问题5：API调用失败
解决：
1. 检查网络连接
2. 确认api-config.js中的API配置正确
3. 查看浏览器控制台错误信息（F12）

📁 项目文件结构
--------------
```
项目文件夹/
├── final_volcano_server.js    # 主服务器文件
├── package.json               # 项目配置和依赖
├── package-lock.json          # 依赖版本锁定
├── api-config.js              # API配置文件
├── P-HOME.html                # 首页
├── P-READER.html              # 阅读页面（含AI功能）
├── start_volcano_server.bat   # Windows启动脚本
├── node_modules/              # 依赖包目录（自动生成）
├── 【必读】操作说明.txt       # 项目说明
├── 项目结构说明.md            # 结构文档
└── 其他HTML页面文件           # 功能页面
```

🔐 API配置说明
-------------
项目使用火山方舟AI API：
- API密钥：已预配置
- 模型：doubao-seedream-4-0-250828
- 如需更换API密钥，请修改api-config.js文件

💻 开发信息
----------
- 前端技术：HTML5 + Tailwind CSS + JavaScript
- 后端技术：Node.js + Express
- AI集成：火山方舟API
- 架构：前后端分离

📞 技术支持
----------
遇到问题请按以下步骤排查：

1. 基础检查
   - Node.js和npm版本是否符合要求
   - 项目文件夹路径是否正确
   - 网络连接是否正常

2. 依赖检查
   - node_modules文件夹是否存在
   - package.json依赖是否完整
   - 端口8888是否可用

3. 环境检查
   - 防火墙设置
   - 系统权限
   - 浏览器兼容性

🔔 重要提醒
----------
1. 首次启动可能需要较长时间安装依赖
2. 确保项目文件夹有读写权限
3. 建议使用Chrome、Edge或Firefox浏览器
4. 本地服务器仅用于开发和测试
5. 生产环境需部署到正式服务器

🔄 更新日志
----------
2025-11-01 更新：
- ✅ 新增AI助读功能
- ✅ 新增读者参与式阅读功能
- ✅ 修复Node.js版本兼容性问题
- ✅ 优化多平台启动兼容性
- ✅ 完善故障排除指南

🎯 使用建议
----------
1. 按照步骤顺序操作
2. 遇到问题先参考故障排除部分
3. 保持项目文件夹结构完整
4. 定期备份重要数据

💡 小贴士
--------
- 可以使用VS Code等编辑器打开项目文件夹
- 启动后保持命令行窗口打开
- 修改代码后需要重启服务器生效

祝您使用愉快！
小说智阅坊开发团队

---
*本文档适用于任何电脑环境，确保项目可移植性*